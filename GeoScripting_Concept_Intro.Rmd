---
title: "Geo-scripting"
author: "Jan Verbesselt"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output: 
  ioslides_presentation:
    footer: "Geo-scripting 2015/6"
---

[//]: #  (Why are you following this course?)
[//]: #  (Why is your background? Are you ready?)
[//]: #  (Welcome to the course, you are following this course because you would like to learn about geo-scripting... Well, this course has been build by... experts for you. Well do you know what geo-scripting is...)

## The geo-scripting course

- How did the [TryR](http://tryr.codeschool.com/) go?
- Is the questionnaire filled in?
    *  For you to refresh your knowledge and 
    *  See if you are ready for this course 

## Did you know?!

Scripts can be used to process lot's of data:

For example:

  - the Google Earth Engine is used for global deforestation monitoring
      - https://earthengine.google.org/#intro
      - http://earthenginepartners.appspot.com/science-2013-global-forest

## Why geo-scripting?

![Coolprogramming](figs/solve-cool-problems.png)

Can you think of other advantages?

## Why geo-scripting?

-  Enable collaboration
    - a huge social R and Python community
    
![Facebook`](figs/facebook.png)

## Why geo-scripting?

- Reproducible: you keep track of what you have done 

- Efficient: you can write a script to do something and repeat your analysis x1000... 

-	Good for finding errors

## Why geo-scripting?

- Build your own tools and functions (e.g. automated webprocessing, etc.)

![CoolprogrammingwithPython](figs/16199604.jpg)

[See Lesson 2 demo's!](https://geoscripting-wur.github.io/Scripting4Geo/#why-scripting)

## Geo-scripting learning objectives

- Read, write, and visualise spatial data using a script
- Find & use libraries, functions for geo-data handling
- Know how to find help
    - writing a good question!
- Solve scripting problems
    - debugging your script
- Apply learned concepts for your own geo-challenge 

## The geo-scripting course

Goal: Scripting to solve spatial challenges!

* A team of `R` & `Python` experts who use geo-scripting languages 
every day helped to develop this course

* Experts from compagnies, research insitute (Alterra, ISRIC) and 
our own RS and GIS group will present 

## Course planning

See blackboard.


## Team work & helping each other

- Teams of two (e.g. somebody who followed the `python` course and who didn't follow it):

    - select the team (2 persons, ideally e.g. 1st year MGI with 2nd year MGI, or non MGI with MGI) and fill in the form (see blackboard - teams)
    - select also which team will review your exercise

- Other teams will be selected for the project work

<div class="centered">
![](figs/teamwork.jpeg)
</div>

## Team work & helping each other

- The Question and Answer forum (see blackboard):
    - Try to obtain the highest score (overall score, best question, best answer)
    - Ask at least one good question
    - Answer at least one question

See the forum and try to answer a question now and login, otherwise your question will be anonymous

- Feedback is welcome all tips and tricks are welcome.

## What  is a scripting language?

- A scripting language can interpret and automate the execution of tasks, instead of clicking!!!
- A scripting language is the glue, between different commands, functions, and objectives without the need to compile it for each OS (e.g. windows)
- This is different from like C/C++/Fortran 
    - these are languages that need to be compiled first.

## Compiling
- Compiling? 
Passing the source code through a compiler, which translates the `high-level language` instructions into `object code`.

```{r, echo=FALSE, fig.align='center', fig.width=6, strip.white=TRUE}
library(png)
library(grid)
img <- readPNG("figs/load_javac.png")
grid.raster(img)
```


## The main scripting languages for GIS and Remote sensing currently are: 

- R
- Python
- GRASS (grass function are included in QGIS)
- JavaScript for geoweb scripting
- Matlab
- IDL (ENVI)
- ...

## Python versus R

- Python is a general purpose programming language
- R is particularly strong in statistical computing and graphics
- Installing libraries in Python is sometimes challenging
- Syntactic differences can be confusing (especially when combining these) 
- There are many R and Python packages for spatial analyses
- Scripts in both languages can be combined:
    - call R from Python using e.g. RPy2
    - call Python from R (http://rpython.r-forge.r-project.org/)
- ... and more: see here for a question asked on [StackExchange for programmers](https://programmers.stackexchange.com/questions/181342/r-vs-python-for-data-analysis)

![R_PythonSymbol](figs/RPythonS.png)

## R packages

```{r, fig.align='center', echo=FALSE, message=FALSE}
if (!file.exists(fn <- "figs/worldcloudRpackage.png")) {
    fn <- "figs/worldcloudRpackage.png"
    require(XML)
    require(tm)
    require(wordcloud)
    require(RColorBrewer)
    u = "http://cran.r-project.org/web/packages/available_packages_by_date.html"
    t = readHTMLTable(u)[[1]]
    ap.corpus <- Corpus(DataframeSource(data.frame(as.character(t[,3]))))
    ap.corpus <- tm_map(ap.corpus, removePunctuation)
    # ap.corpus <- tm_map(ap.corpus, tolower)
    #  txt.corpus <- tm_map(txt.corpus, tolower)
    # must be changed to
    ap.corpus <- tm_map(ap.corpus, content_transformer(tolower))
    ap.corpus <- tm_map(ap.corpus, function(x) removeWords(x, stopwords("english")))
    ap.tdm <- TermDocumentMatrix(ap.corpus)
    ap.m <- as.matrix(ap.tdm)
    ap.v <- sort(rowSums(ap.m),decreasing=TRUE)
    ap.d <- data.frame(word = names(ap.v),freq=ap.v)
    table(ap.d$freq)
    pal2 <- brewer.pal(8,"Dark2")
    png(fn, width=1280, height=800)
    wordcloud(ap.d$word,ap.d$freq, scale=c(8,.2),min.freq=3,
    max.words=Inf, random.order=FALSE, rot.per=.15, colors=pal2)
    dev.off()    
}
```

![](figs/worldcloudRpackage.png)

## R in Python

A very simple example using the Python Rpy2 module:

```{r, engine='python', eval = TRUE}
import rpy2.robjects as robjects
pi = robjects.r['pi']
print(pi[0])
```

![RPython](figs/RPython.jpeg)

## Many programs have support for

- Python (Blender, Sketchup, QGIS, MySQL, PostGIS)
- R (GRASS, QGIS, MySQL, PostGIS)

## Time for R action!

- Let's have a look at the questions in lesson 1!
- The excercise of today

## Tomorrow morning

- Finalise the lesson 1 and the excercise
- Look at Lesson 2
    - an overview of what is possible with scripting
    - no need to understand the code (lesson 2 is a demonstration lesson!)

[See Lesson 2 demo's!](https://geoscripting-wur.github.io/Scripting4Geo/#why-scripting)

